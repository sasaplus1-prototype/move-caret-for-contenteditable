{
  "version": 3,
  "sources": ["index.ts"],
  "sourcesContent": ["(function () {\n  'use strict';\n\n  const editor = document.querySelector<HTMLDivElement>('#js-editor');\n  const insert = document.querySelector<HTMLButtonElement>('#js-insert');\n  const info = document.querySelector<HTMLSpanElement>('#js-caret-info');\n  const html = document.querySelector<HTMLTextAreaElement>('#js-html');\n\n  function onClickInsert() {\n    if (!editor) {\n      return;\n    }\n\n    editor.focus();\n\n    const selection = window.getSelection();\n\n    if (selection.rangeCount <= 0) {\n      return;\n    }\n\n    const fragment = document.createDocumentFragment();\n    const parser = new DOMParser();\n    const dom = parser.parseFromString(html.value, 'text/html');\n\n    fragment.append(...dom.body.childNodes);\n\n    const range = selection.getRangeAt(0);\n\n    range.insertNode(fragment);\n\n    range.collapse(false);\n\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    editor.focus();\n  }\n\n  function onMoveCaret() {\n    if (!info) {\n      return;\n    }\n\n    const selection = window.getSelection();\n\n    info.innerHTML = `\n      anchorNode: ${selection.anchorNode.nodeName},\n      anchorOffset: ${selection.anchorOffset},\n      focusNode: ${selection.focusNode.nodeName},\n      focusOffset: ${selection.focusOffset},\n      isCollapsed: ${selection.isCollapsed},\n      type: ${selection.type}\n    `;\n  }\n\n  if (insert && html) {\n    insert.addEventListener('click', onClickInsert, false);\n  }\n\n  document.addEventListener('selectionchange', onMoveCaret, false);\n})();\n"],
  "mappings": ";;AAAA,EAAC,YAAY;AACX;AAEA,UAAM,SAAS,SAAS,cAA8B;AACtD,UAAM,SAAS,SAAS,cAAiC;AACzD,UAAM,OAAO,SAAS,cAA+B;AACrD,UAAM,OAAO,SAAS,cAAmC;AAEzD,6BAAyB;AACvB,UAAI,CAAC,QAAQ;AACX;AAAA;AAGF,aAAO;AAEP,YAAM,YAAY,OAAO;AAEzB,UAAI,UAAU,cAAc,GAAG;AAC7B;AAAA;AAGF,YAAM,WAAW,SAAS;AAC1B,YAAM,SAAS,IAAI;AACnB,YAAM,MAAM,OAAO,gBAAgB,KAAK,OAAO;AAE/C,eAAS,OAAO,GAAG,IAAI,KAAK;AAE5B,YAAM,QAAQ,UAAU,WAAW;AAEnC,YAAM,WAAW;AAEjB,YAAM,SAAS;AAEf,gBAAU;AACV,gBAAU,SAAS;AAEnB,aAAO;AAAA;AAGT,2BAAuB;AACrB,UAAI,CAAC,MAAM;AACT;AAAA;AAGF,YAAM,YAAY,OAAO;AAEzB,WAAK,YAAY;AAAA,oBACD,UAAU,WAAW;AAAA,sBACnB,UAAU;AAAA,mBACb,UAAU,UAAU;AAAA,qBAClB,UAAU;AAAA,qBACV,UAAU;AAAA,cACjB,UAAU;AAAA;AAAA;AAItB,QAAI,UAAU,MAAM;AAClB,aAAO,iBAAiB,SAAS,eAAe;AAAA;AAGlD,aAAS,iBAAiB,mBAAmB,aAAa;AAAA;",
  "names": []
}
